<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>溯源 - 任务看板</title>
  <!-- 引入外部资源 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- 自定义配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#1A365D',      // 深靛蓝 - 主色调
            secondary: '#4A6F5D',    // 自然绿 - 进度指示
            trace: '#8B6B4E',        // 土褐色 - 历史轨迹
            neutral: '#F5F5F0',      // 米白色 - 背景
            success: '#2E7D32',
            warning: '#E65100',
            danger: '#C62828',
            todo: '#9E9E9E',         // 待办状态色
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .timeline-dot-sm {
        @apply inline-block w-1.5 h-1.5 rounded-full bg-gray-400 mr-2;
      }
      .task-card {
        @apply bg-white rounded-lg p-3 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300 cursor-move;
      }
      .column-header {
        @apply flex justify-between items-center mb-4 px-1;
      }
      .status-badge {
        @apply px-2 py-0.5 text-xs rounded-full;
      }
    }
  </style>
</head>
<body class="bg-neutral h-screen flex overflow-hidden text-gray-800">
  <!-- 侧边栏 -->
  <aside class="w-64 bg-white h-full border-r border-gray-200 flex flex-col transition-all duration-300 ease-in-out shadow-sm">
    <!-- 品牌标识 -->
    <div class="p-5 border-b border-gray-200">
      <h1 class="text-xl font-bold text-primary flex items-center gap-2">
        <i class="fa fa-link"></i>
        <span>溯源</span>
      </h1>
    </div>
    
    <!-- 导航菜单 -->
    <nav class="flex-1 py-4 overflow-y-auto">
      <ul class="space-y-1 px-3">
        <li>
          <a href="index.html" class="flex items-center gap-3 px-4 py-3 rounded-lg cursor-pointer transition-all-300 hover:bg-gray-100">
            <i class="fa fa-dashboard text-lg w-5 text-center"></i>
            <span>总览</span>
          </a>
        </li>
        <li>
          <a href="report.html" class="flex items-center gap-3 px-4 py-3 rounded-lg cursor-pointer transition-all-300 hover:bg-gray-100">
            <i class="fa fa-file-text-o text-lg w-5 text-center"></i>
            <span>日报/周报</span>
          </a>
        </li>
        <li>
          <a href="kanban.html" class="flex items-center gap-3 px-4 py-3 rounded-lg cursor-pointer transition-all-300 bg-primary/10 text-primary font-medium">
            <i class="fa fa-trello text-lg w-5 text-center"></i>
            <span>任务看板</span>
          </a>
        </li>
        <li>
          <a href="knowledge.html" class="flex items-center gap-3 px-4 py-3 rounded-lg cursor-pointer transition-all-300 hover:bg-gray-100">
            <i class="fa fa-book text-lg w-5 text-center"></i>
            <span>知识库</span>
          </a>
        </li>
      </ul>
      
      <!-- 项目筛选 -->
      <div class="mt-8 px-4">
        <h3 class="text-xs uppercase text-gray-500 font-semibold mb-2 px-1 flex items-center">
          <span class="w-1.5 h-1.5 rounded-full bg-trace mr-2"></span>
          项目筛选
        </h3>
        <ul class="space-y-1">
          <li>
            <a href="#" class="flex items-center gap-3 px-4 py-2.5 rounded-lg cursor-pointer transition-all-300 bg-primary/10 text-primary">
              <span class="w-3 h-3 rounded-full bg-primary inline-block"></span>
              <span>溯源系统开发</span>
            </a>
          </li>
          <li>
            <a href="#" class="flex items-center gap-3 px-4 py-2.5 rounded-lg cursor-pointer transition-all-300 hover:bg-gray-100 text-sm">
              <span class="w-3 h-3 rounded-full bg-secondary inline-block"></span>
              <span>个人学习计划</span>
            </a>
          </li>
          <li>
            <a href="#" class="flex items-center gap-3 px-4 py-2.5 rounded-lg cursor-pointer transition-all-300 hover:bg-gray-100 text-sm">
              <span class="w-3 h-3 rounded-full bg-trace inline-block"></span>
              <span>生活事务管理</span>
            </a>
          </li>
        </ul>
      </div>
    </nav>
    
    <!-- 用户信息 -->
    <div class="p-4 border-t border-gray-200">
      <div class="flex items-center gap-3">
        <img src="https://picsum.photos/id/1005/200/200" alt="用户头像" class="w-9 h-9 rounded-full object-cover ring-2 ring-primary/20">
        <div>
          <p class="text-sm font-medium">用户名</p>
          <p class="text-xs text-gray-500">个人版</p>
        </div>
        <button class="ml-auto text-gray-500 hover:text-primary transition-colors">
          <i class="fa fa-cog"></i>
        </button>
      </div>
    </div>
  </aside>
  
  <!-- 主内容区 -->
  <main class="flex-1 flex flex-col overflow-hidden">
    <!-- 顶部导航 -->
    <header class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6 shadow-sm">
      <div class="flex items-center gap-4">
        <button class="lg:hidden text-gray-500 hover:text-primary">
          <i class="fa fa-bars text-xl"></i>
        </button>
        <div class="relative">
          <input type="text" placeholder="搜索任务..." 
                 class="pl-10 pr-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary w-64 text-sm">
          <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
        </div>
      </div>
      
      <div class="flex items-center gap-5">
        <div class="flex items-center gap-3">
          <button class="p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors" title="筛选任务">
            <i class="fa fa-filter"></i>
          </button>
          <button class="p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors" title="任务历史">
            <i class="fa fa-history"></i>
          </button>
          <button class="p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors" title="视图切换">
            <i class="fa fa-th"></i>
          </button>
        </div>
        
        <button class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium flex items-center gap-2 shadow-sm">
          <i class="fa fa-plus"></i>
          <span>新建任务</span>
        </button>
      </div>
    </header>
    
    <!-- 页面内容 -->
    <div class="flex-1 overflow-auto p-6">
      <!-- 页面标题与进度提示 -->
      <div class="mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
        <div>
          <h2 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-gray-800">任务进度溯源</h2>
          <p class="text-gray-500 mt-1">追踪任务从“待办”到“完成”的每一步轨迹</p>
        </div>
        <div class="flex items-center gap-2 text-sm text-gray-500">
          <span>当前项目：</span>
          <span class="font-medium text-primary">溯源系统开发</span>
          <span class="mx-2">|</span>
          <span>任务总数：12</span>
        </div>
      </div>
      
      <!-- 看板列容器 (横向滚动) -->
      <div class="flex gap-6 overflow-x-auto pb-6 min-w-max">
        <!-- 待办列 -->
        <div class="w-[300px] md:w-[350px] flex flex-col gap-3">
          <div class="column-header">
            <h3 class="font-semibold flex items-center">
              <span class="w-3 h-3 rounded-full bg-todo mr-2"></span>
              待办
              <span class="ml-2 text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full">4</span>
            </h3>
            <button class="text-gray-400 hover:text-primary transition-colors">
              <i class="fa fa-plus"></i>
            </button>
          </div>
          
          <!-- 任务卡片 -->
          <div class="task-card">
            <div class="flex justify-between items-start mb-2">
              <span class="status-badge bg-todo/10 text-todo">低优先级</span>
              <button class="text-gray-400 hover:text-primary transition-colors text-xs" title="查看轨迹">
                <i class="fa fa-history"></i>
              </button>
            </div>
            <h4 class="font-medium text-sm mb-2">编写API接口文档</h4>
            <div class="text-xs text-gray-500 space-y-1 mb-3">
              <p class="flex items-center">
                <i class="fa fa-calendar-o mr-1"></i>
                创建时间：2023-06-08
              </p>
              <p class="flex items-center">
                <i class="fa fa-clock-o mr-1"></i>
                截止日期：2023-06-20
              </p>
            </div>
            <div class="flex justify-between items-center text-xs">
              <span class="flex items-center text-gray-500">
                <img src="https://picsum.photos/id/1005/100/100" alt="负责人" class="w-5 h-5 rounded-full mr-1">
                负责人
              </span>
              <span class="text-trace hover:underline cursor-pointer">关联文档(1)</span>
            </div>
          </div>
          
          <div class="task-card">
            <div class="flex justify-between items-start mb-2">
              <span class="status-badge bg-warning/10 text-warning">中优先级</span>
              <button class="text-gray-400 hover:text-primary transition-colors text-xs" title="查看轨迹">
                <i class="fa fa-history"></i>
              </button>
            </div>
            <h4 class="font-medium text-sm mb-2">准备技术面试资料</h4>
            <div class="text-xs text-gray-500 space-y-1 mb-3">
              <p class="flex items-center">
                <i class="fa fa-calendar-o mr-1"></i>
                创建时间：2023-06-09
              </p>
              <p class="flex items-center">
                <i class="fa fa-clock-o mr-1"></i>
                截止日期：2023-06-18
              </p>
            </div>
            <div class="flex justify-between items-center text-xs">
              <span class="flex items-center text-gray-500">
                <img src="https://picsum.photos/id/1005/100/100" alt="负责人" class="w-5 h-5 rounded-full mr-1">
                负责人
              </span>
              <span class="text-trace hover:underline cursor-pointer">关联文档(2)</span>
            </div>
          </div>
          
          <div class="task-card">
            <div class="flex justify-between items-start mb-2">
              <span class="status-badge bg-danger/10 text-danger">高优先级</span>
              <button class="text-gray-400 hover:text-primary transition-colors text-xs" title="查看轨迹">
                <i class="fa fa-history"></i>
              </button>
            </div>
            <h4 class="font-medium text-sm mb-2">修复登录页兼容性问题</h4>
            <div class="text-xs text-gray-500 space-y-1 mb-3">
              <p class="flex items-center">
                <i class="fa fa-calendar-o mr-1"></i>
                创建时间：2023-06-10
              </p>
              <p class="flex items-center">
                <i class="fa fa-clock-o mr-1"></i>
                截止日期：2023-06-12
              </p>
            </div>
            <div class="flex justify-between items-center text-xs">
              <span class="flex items-center text-gray-500">
                <img src="https://picsum.photos/id/1005/100/100" alt="负责人" class="w-5 h-5 rounded-full mr-1">
                负责人
              </span>
              <span class="text-trace hover:underline cursor-pointer">关联任务(1)</span>
            </div>
          </div>
          
          <div class="task-card">
            <div class="flex justify-between items-start mb-2">
              <span class="status-badge bg-todo/10 text-todo">低优先级</span>
              <button class="text-gray-400 hover:text-primary transition-colors text-xs" title="查看轨迹">
                <i class="fa fa-history"></i>
              </button>
            </div>
            <h4 class="font-medium text-sm mb-2">整理项目开发规范</h4>
            <div class="text-xs text-gray-500 space-y-1 mb-3">
              <p class="flex items-center">
                <i class="fa fa-calendar-o mr-1"></i>
                创建时间：2023-06-07
              </p>
              <p class="flex items-center">
                <i class="fa fa-clock-o mr-1"></i>
                截止日期：2023-06-25
              </p>
            </div>
            <div class="flex justify-between items-center text-xs">
              <span class="flex items-center text-gray-500">
                <img src="https://picsum.photos/id/1005/100/100" alt="负责人" class="w-5 h-5 rounded-full mr-1">
                负责人
              </span>
              <span class="text-trace hover:underline cursor-pointer">关联文档(3)</span>
            </div>
          </div>
        </div>
        
        <!-- 进行中列 -->
        <div class="w-[300px] md:w-[350px] flex flex-col gap-3">
          <div class="column-header">
            <h3 class="font-semibold flex items-center">
              <span class="w-3 h-3 rounded-full bg-warning mr-2"></span>
              进行中
              <span class="ml-2 text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full">3</span>
            </h3>
            <button class="text-gray-400 hover:text-primary transition-colors">
              <i class="fa fa-plus"></i>
            </button>
          </div>
          
          <!-- 任务卡片 -->
          <div class="task-card">
            <div class="flex justify-between items-start mb-2">
              <span class="status-badge bg-primary/10 text-primary">高优先级</span>
              <button class="text-gray-400 hover:text-primary transition-colors text-xs" title="查看轨迹">
                <i class="fa fa-history"></i>
              </button>
            </div>
            <h4 class="font-medium text-sm mb-2">完成任务看板拖拽功能</h4>
            <div class="text-xs text-gray-500 space-y-1 mb-3">
              <p class="flex items-center">
                <i class="fa fa-calendar-o mr-1"></i>
                创建时间：2023-06-05
              </p>
              <p class="flex items-center">
                <i class="fa fa-clock-o mr-1"></i>
                截止日期：2023-06-15
              </p>
            </div>
            <!-- 进度条 -->
            <div class="w-full bg-gray-100 rounded-full h-1.5 mb-2 overflow-hidden">
              <div class="bg-primary h-1.5 rounded-full" style="width: 60%"></div>
            </div>
            <div class="flex justify-between items-center text-xs">
              <span class="text-gray-500">60% 完成</span>
              <span class="text-trace hover:underline cursor-pointer">关联任务(2)</span>
            </div>
          </div>
          
          <div class="task-card">
            <div class="flex justify-between items-start mb-2">
              <span class="status-badge bg-secondary/10 text-secondary">中优先级</span>
              <button class="text-gray-400 hover:text-primary transition-colors text-xs" title="查看轨迹">
                <i class="fa fa-history"></i>
              </button>
            </div>
            <h4 class="font-medium text-sm mb-2">学习React Hooks高级用法</h4>
            <div class="text-xs text-gray-500 space-y-1 mb-3">
              <p class="flex items-center">
                <i class="fa fa-calendar-o mr-1"></i>
                创建时间：2023-06-08
              </p>
              <p class="flex items-center">
                <i class="fa fa-clock-o mr-1"></i>
                截止日期：2023-06-20
              </p>
            </div>
            <!-- 进度条 -->
            <div class="w-full bg-gray-100 rounded-full h-1.5 mb-2 overflow-hidden">
              <div class="bg-secondary h-1.5 rounded-full" style="width: 40%"></div>
            </div>
            <div class="flex justify-between items-center text-xs">
              <span class="text-gray-500">40% 完成</span>
              <span class="text-trace hover:underline cursor-pointer">关联文档(1)</span>
            </div>
          </div>
          
          <div class="task-card">
            <div class="flex justify-between items-start mb-2">
              <span class="status-badge bg-warning/10 text-warning">中优先级</span>
              <button class="text-gray-400 hover:text-primary transition-colors text-xs" title="查看轨迹">
                <i class="fa fa-history"></i>
              </button>
            </div>
            <h4 class="font-medium text-sm mb-2">设计知识库页面原型</h4>
            <div class="text-xs text-gray-500 space-y-1 mb-3">
              <p class="flex items-center">
                <i class="fa fa-calendar-o mr-1"></i>
                创建时间：2023-06-10
              </p>
              <p class="flex items-center">
                <i class="fa fa-clock-o mr-1"></i>
                截止日期：2023-06-16
              </p>
            </div>
            <!-- 进度条 -->
            <div class="w-full bg-gray-100 rounded-full h-1.5 mb-2 overflow-hidden">
              <div class="bg-warning h-1.5 rounded-full" style="width: 30%"></div>
            </div>
            <div class="flex justify-between items-center text-xs">
              <span class="text-gray-500">30% 完成</span>
              <span class="text-trace hover:underline cursor-pointer">关联任务(1)</span>
            </div>
          </div>
        </div>
        
        <!-- 已完成列 -->
        <div class="w-[300px] md:w-[350px] flex flex-col gap-3">
          <div class="column-header">
            <h3 class="font-semibold flex items-center">
              <span class="w-3 h-3 rounded-full bg-success mr-2"></span>
              已完成
              <span class="ml-2 text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full">5</span>
            </h3>
            <button class="text-gray-400 hover:text-primary transition-colors">
              <i class="fa fa-plus"></i>
            </button>
          </div>
          
          <!-- 任务卡片 -->
          <div class="task-card">
            <div class="flex justify-between items-start mb-2">
              <span class="status-badge bg-success/10 text-success">已完成</span>
              <button class="text-gray-400 hover:text-primary transition-colors text-xs" title="查看轨迹">
                <i class="fa fa-history"></i>
              </button>
            </div>
            <h4 class="font-medium text-sm mb-2">完成溯源系统UI设计</h4>
            <div class="text-xs text-gray-500 space-y-1 mb-3">
              <p class="flex items-center">
                <i class="fa fa-calendar-o mr-1"></i>
                创建时间：2023-06-01
              </p>
              <p class="flex items-center">
                <i class="fa fa-check mr-1 text-success"></i>
                完成时间：2023-06-10
              </p>
            </div>
            <div class="flex justify-between items-center text-xs">
              <span class="text-success">耗时：9天</span>
              <span class="text-trace hover:underline cursor-pointer">查看详情</span>
            </div>
          </div>
          
          <div class="task-card">
            <div class="flex justify-between items-start mb-2">
              <span class="status-badge bg-success/10 text-success">已完成</span>
              <button class="text-gray-400 hover:text-primary transition-colors text-xs" title="查看轨迹">
                <i class="fa fa-history"></i>
              </button>
            </div>
            <h4 class="font-medium text-sm mb-2">整理电脑文件</h4>
            <div class="text-xs text-gray-500 space-y-1 mb-3">
              <p class="flex items-center">
                <i class="fa fa-calendar-o mr-1"></i>
                创建时间：2023-06-09
              </p>
              <p class="flex items-center">
                <i class="fa fa-check mr-1 text-success"></i>
                完成时间：2023-06-10
              </p>
            </div>
            <div class="flex justify-between items-center text-xs">
              <span class="text-success">耗时：1天</span>
              <span class="text-trace hover:underline cursor-pointer">查看详情</span>
            </div>
          </div>
          
          <div class="task-card">
            <div class="flex justify-between items-start mb-2">
              <span class="status-badge bg-success/10 text-success">已完成</span>
              <button class="text-gray-400 hover:text-primary transition-colors text-xs" title="查看轨迹">
                <i class="fa fa-history"></i>
              </button>
            </div>
            <h4 class="font-medium text-sm mb-2">数据库设计</h4>
            <div class="text-xs text-gray-500 space-y-1 mb-3">
              <p class="flex items-center">
                <i class="fa fa-calendar-o mr-1"></i>
                创建时间：2023-06-02
              </p>
              <p class="flex items-center">
                <i class="fa fa-check mr-1 text-success"></i>
                完成时间：2023-06-07
              </p>
            </div>
            <div class="flex justify-between items-center text-xs">
              <span class="text-success">耗时：5天</span>
              <span class="text-trace hover:underline cursor-pointer">查看详情</span>
            </div>
          </div>
        </div>
        
        <!-- 任务轨迹详情面板 (默认隐藏，点击任务卡片的历史图标显示) -->
        <div class="w-[300px] md:w-[350px] bg-white rounded-xl shadow-md border border-gray-200 p-4 hidden" id="task-trace-panel">
          <div class="flex justify-between items-center mb-4">
            <h3 class="font-semibold text-primary">任务轨迹详情</h3>
            <button class="text-gray-400 hover:text-gray-600" id="close-trace-panel">
              <i class="fa fa-times"></i>
            </button>
          </div>
          
          <div class="mb-4">
            <h4 class="font-medium mb-1">完成溯源系统UI设计</h4>
            <p class="text-xs text-gray-500">创建于 2023-06-01 · 完成于 2023-06-10</p>
          </div>
          
          <!-- 轨迹时间轴 -->
          <div class="space-y-4 relative pl-4 border-l-2 border-gray-200">
            <div class="relative">
              <div class="absolute -left-[10px] top-1 w-3 h-3 rounded-full bg-success border-2 border-white"></div>
              <p class="text-sm font-medium">任务完成</p>
              <p class="text-xs text-gray-500 mt-0.5">2023-06-10 16:30</p>
              <p class="text-xs text-gray-600 mt-1">提交UI设计稿至项目仓库，包含总览页、报告页、看板页原型</p>
            </div>
            
            <div class="relative">
              <div class="absolute -left-[10px] top-1 w-3 h-3 rounded-full bg-warning border-2 border-white"></div>
              <p class="text-sm font-medium">状态变更为「进行中」</p>
              <p class="text-xs text-gray-500 mt-0.5">2023-06-05 09:15</p>
              <p class="text-xs text-gray-600 mt-1">开始设计看板页面，确定任务卡片与轨迹展示方案</p>
            </div>
            
            <div class="relative">
              <div class="absolute -left-[10px] top-1 w-3 h-3 rounded-full bg-primary border-2 border-white"></div>
              <p class="text-sm font-medium">添加截止日期</p>
              <p class="text-xs text-gray-500 mt-0.5">2023-06-03 14:20</p>
              <p class="text-xs text-gray-600 mt-1">设置截止日期为2023-06-15，优先级调整为「高」</p>
            </div>
            
            <div class="relative">
              <div class="absolute -left-[10px] top-1 w-3 h-3 rounded-full bg-todo border-2 border-white"></div>
              <p class="text-sm font-medium">任务创建</p>
              <p class="text-xs text-gray-500 mt-0.5">2023-06-01 10:00</p>
              <p class="text-xs text-gray-600 mt-1">创建「溯源系统UI设计」任务，初始优先级为「中」</p>
            </div>
          </div>
          
          <!-- 关联记录 -->
          <div class="mt-6">
            <h4 class="text-sm font-medium mb-2 flex items-center">
              <i class="fa fa-link text-trace mr-1"></i>
              关联记录
            </h4>
            <div class="space-y-2 text-xs">
              <a href="#" class="block p-2 bg-gray-50 rounded hover:bg-gray-100 transition-colors text-gray-600">
                关联日报：2023-06-10 工作记录
              </a>
              <a href="#" class="block p-2 bg-gray-50 rounded hover:bg-gray-100 transition-colors text-gray-600">
                关联文档：溯源系统UI设计规范.md
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <!-- 任务轨迹面板控制脚本 -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 打开轨迹面板
      const traceButtons = document.querySelectorAll('[title="查看轨迹"]');
      const tracePanel = document.getElementById('task-trace-panel');
      
      traceButtons.forEach(button => {
        button.addEventListener('click', function(e) {
          e.stopPropagation();
          tracePanel.classList.remove('hidden');
          // 滚动到面板位置
          tracePanel.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        });
      });
      
      // 关闭轨迹面板
      const closeButton = document.getElementById('close-trace-panel');
      closeButton.addEventListener('click', function() {
        tracePanel.classList.add('hidden');
      });
    });
  </script>
</body>
</html>